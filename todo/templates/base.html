<!DOCTYPE html>
<title>{% block title %}{% endblock %}</title>
<nav>
    <h1><a href="{{ url_for('index.index') }}" >To-Do</a></h1>
    <ul>
        {% if g.user %}
            <li><span><a href="{{ url_for('user.account', id=g.user['id']) }}">{{ g.user['username'] }}</a></span></li>
            <li><a href="{{ url_for('user.logout') }}">Log Out</a></li>
        {% else %}
            <li><a href="{{ url_for('user.register') }}">Register</a></li>
            <li><a href="{{ url_for('user.login') }}">Login</a></li>
        {% endif %}
    </ul>
</nav>
<section class="content">
   <header>
       {% block header %}{% endblock %}
   </header>
    {% for message in get_flashed_messages() %}
        <div class="flash">{{message}}</div>
    {% endfor %}
    {% block content %}
        {% if g.user %}
            Hello {{ g.user['username'] }}! It's your to-do list
                <div>
                    <form method="post">
                        <hr>
                        <a>New task:</a>
                        <br>
                        <label for="title">Title</label>
                        <input id="title" name="title">

                        <label for="priority">Priority</label>
                        <select id="priority" name="priority">
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                        </select>

                        <input type="submit" value="Save">
                        <hr>
                    </form>
                </div>
            {% for task in tasks %}
                <p><input type="checkbox" id="task" name="task">
                <label for="task">{{task['title'], task['status'], task['priority'] }}</label>
                </p>
            {% endfor %}
                <input type="submit" value="Done">
        {% else %}
            Hello unknown person, it's to-do list. Please log in or register.
        {% endif %}
    {% endblock %}
</section>
